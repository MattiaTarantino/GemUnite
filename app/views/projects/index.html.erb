<h1>Progetti aperti riguardo i tuoi ambiti d’interesse</h1>
<div data-controller="project-sort">
  <label for="sort_by">Ordina per:</label>
    <select name="sort_by" id="sort_by" data-action="project-sort#update" data-project-sort-target="select" data-user-id="<%= current_user.id %>">
      <option></option>
      <option value="time_posted" <%= 'selected' if @sorting == 'time_posted' %> >Più recenti</option>
      <option value="time_posted_reverse" <%= 'selected' if @sorting == 'time_posted_reverse' %> >Meno recenti</option>
      <option value="members" <%= 'selected' if @sorting == 'members' %> >Numero membri (crescente)</option>
      <option value="members_reverse" <%= 'selected' if @sorting == 'members_reverse' %> >Numero membri (decrescente)</option>
    </select>
</div>
<%= form_tag(user_projects_path(current_user), method: :get) do %>
  <%= label_tag :filter_by, "Seleziona un campo:" %>
  <% all_fields = [["Tutti", "all"]] + Field.all.map { |fie| [fie.nome, fie.id.to_s] } %>
  <%= select_tag :filter_by, options_for_select(all_fields, selected: (@selected_fields == 'all') ? 'all' : @selected_fields.to_s) %>
  <%= submit_tag "Filtra" %>
<% end %>
<%= render "projects/projects", projects: @projects %>
<div id="segnalazione">
  <%= link_to "Manda una segnalazione", new_user_report_path(user_id: @user.id) %>
</div>


